
4.0 (24-05-2021)
	Refactoring. CSS class names were changed to BEM, so you need change your styles to update the code (no legacy saved, sorry). 

	Changed CSS classes list:
	
	kc__wrap     → kamatoc-wrap
	kc__title    → kamatoc-wrap__title
	contents     → kamatoc
	top          → kamatoc__top
	sub          → kamatoc__sub
	sub_N        → kamatoc__sub_N
	kc__anchor   → kamatoc-anchor
	kc-gotop     → kamatoc-gotop
	kc__anchlink → kamatoc-anchlink
	

3.20 (26-08-2020)
- `html_entity_decode()` для очистки создаваемого анкора: `&lt;datalist&gt;` >>> datalist, а не lt-datalist-gt

3.19
- Возмоность блокировать обработку шорткода указав дополнительные скобки в начале ``[[contents]]`` а не ``[contents]``.

3.18
- Хуки: `kama_cont::sanitaze_anchor_before`, `kama_cont::sanitaze_anchor`.
- Метод `_unique_anchor()` стал статическим и немного изменена логика его работы, чтобы считать суффикс глобально.

3.17
- Поправил неприятный баг связанный с введением параметра `as_table`.

3.16
- Новый параметр шорткода `as_table="Заголовок колонки1|Заголовок колонки2"`.
- Исправил ошибку микроразметки для тега A надо было `itemprop="url"` а не `itemprop="item"`.

3.15
- Новый параметр 'anchor_attr_name' и возможность указать атрибут тегу (по умолчанию id) значение которого странет анкором (хэшем)

3.14
- Баг с дублированием 'anchor_link'

3.13
- Новый параметр 'js'

3.12
- Уникализация одинаковых якорей - _unique_anchor()

3.11
- Удаляется IMG тег из заголовка в оглавлении...

3.10
- Удаляется A тег из заголовка в оглавлении...

3.9
- При 'anchor_type=a' не работал параметр 'anchor_link'

3.8
- Баг синтаксиса при заполнении свойства $this->contents в PHP 7.1

3.7
- Добавил элемент position при маркировке schema.org

3.6.1
- Тег заголовка "Содержание" изменил с DIV на SPAN

3.6
- Исправление парсинга тегов - удаление пустых при разбиении по [ ,]

3.5
- Стабильность. в параметр selectors можно указывать строку с элементами через запятую.

3.4
- Параметр 'tomenu_simcount'

3.3
- Умный показ ссылки "К содержанию" - не отображается если символов между заголовкми меньше 500

3.2
- Добавил параметр 'anchor_link'. Позволяет добавить '#' перед подзаголовком статьи со ссылкой на текущий анкор заголовка

3.0
- Добавил поддержку микроразметки. Смотрите параметр markup

2.9.4
- Добавил параметр `$contents_cb` в метод `shortcode( $content, $contents_cb = '' )`, чтобы можно было указать функцию которая обработает созданное оглавление.

	Например заменим UL на OL в оглавлении:

	```php
	$content = $kc->shortcode( $content, function( $contents ){
		return str_replace( array('<ul','ul>'), array('<ol','ol>'), $contents );
	} );
	```


2.9.3
- Перенес встроенный `<style>` внутрь оборачивателя.

2.9.2
- Добавил метку `embed`, которую можно добавить в шорткод вместе с указанными тегами (`[contents h3 embed]`), тогда содержание будет выведено без оборачивающего тега и заголовка, т.е. только `<ul>...</ul>`. Нужно это когда содержание используется внутри контекста, не как обычное оглавление.

2.9.1
- Добавил параметр 'anchor_type' - Какой тип анкора использовать: 'a' - `<a name="anchor"></a>` или 'id' - `<h2 id="anchor">`

2.9.0
- В 100 раз ускорил скорость работы, если в тегах поиска указан класс.
- Объединил поиски: теперь в тегах можно указывать одновременно и теги и классы, пр: '`h2 .class_name`'
- Добавил удаление верхних уровней, если они указаны, но их нет в тексте, т.е. указано: "h2 h3 h4" а в тексте есть только "h3 h4" тогда они шли как подуровни с ненужным отступом слева.

2.8.8
- Добавил параметр spec в который можно указать символы, которые нужно оставлять в анкорах.
- Подправил функцию транслитерации анкора `__sanitaze_anchor()`.

2.8.7
- Новое: `strip_tags()` для текста при сравнении его с параметром `min_length`

2.8.6
- Новое: Параметры можно передавать в виде объекта данных, не только массива.

2.8.5
- Плюс: `div` оборачивающий содержание с классом `.kc__wrap`.
- Правка: корректная работа параметра `page_url` для ссылки "к содержанию".

2.8.4
- Новое: опция ``shortcode``, в которой можно указать название шоткода, например изменить на "оглавление" в результате в тексте нужно будет указывать так: `[оглавление h2]`
- Новое: метод класса `strip_shortcode()` - вырезает шоткод, для страниц архивов.
- Новое: метод класса `__construct()`, чтобы можно было использовать несколько экземпляров класса.
- мелкие правки кода

2.8.3
- Новое: Опция page_url

2.8.2
- Новое: свойство класса contents там сохраняется html код содержания.

2.8.1
- Фиксы багов из версии 2.8.0
- Новое: фильтрация анкоров: добавил понимание точки и удалил замену крайних "-". Так должно поддерживаться больше строк...

2.8.0
- Новое: добавил возможность указывать в качестве селекторов атрибут класс. См. парам. `$tags`.
- Баг: возможность установить разные настройки для разных выводов одного экземпляра
- Новое: удаление html тегов при очистке текста якоря

2.7.3 (14 6 2015)
- Новое: символы (`~+=$`) в очистку анкора (транслитерация). Иногда эти символы нужно учитывать, а не заменять на -

2.7.1 (14 4 2015)
- Новое: класс (kc_anchor) к анкору, чтобы можно было его стилизовать, если вдруг понадобится: <a class="kc_anchor" name="

2.7 (31 3 2015)
- Новое: опция `min_length`, в которую нужно указывать минимальную длину текста, чтобы содержание собиралось. По умолчанию 4000 символов. Т.е. если текст меньше, то содержание просто не будет работать.

2.6 (14 3 2015)
- Новое: обернул все содержание в ``<div class="contents-wrap">``.

2.5 (13 3 2015)
- Баг: был серьезный баг связанный с параметром `min_found` - если заголовков меньше чем в min_found, то контент дублировался.

2.4 (6 3 2015)
- Изменил: убрал атрибут ID у заменяемых тегов: было `<h2 id="anchor">Заголовок</h2>` а стало `<a name="anchor"></a><h2>Заголовок</h2>`

2.3 (6 3 2015)
- Новое: транслитерацию анкоров (`#punkt-menu`). Теперь анкоры в УРЛ можно читать и при изменении порядка, ссылка на пункт продолжает работать. Раньше анкоры были `#h-1, #h-2`.

2.2 (9 2 2015)
- Новое: функция чтобы можно было указывать минимальное количество найденных тегов, для того чтобы скрипт работал.
Мелкие правки кода.

2.1.4 (30 10 2014):
- Исправление: поправил css стили для заголовка (была ошибка).

2.1.3 (27 10 2014):
- Добавил: `class="top"` к верхнему уровню списка.
